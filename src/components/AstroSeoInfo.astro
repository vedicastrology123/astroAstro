---
import { AstroSeo } from '@astrolib/seo';
import siteDefaults from '../data/siteData.json';

const canonicalURL = new URL(Astro.url.pathname, Astro.url);
const siteURL = new URL("/", Astro.url);


// Get the page's frontmatter from Astro.props
const { seo: frontmatter = {} } = Astro.props;

const seoOverrides = Astro.props;
const seo = { ...siteDefaults.default, ...seoOverrides, ...frontmatter }; // Merge defaults with overrides

// Get the page's URL from Astro.url
const imageUrl = siteDefaults.default.openGraph.basic.image;

---

<AstroSeo
  canonical={ canonicalURL.toString() }
  openGraph={{
    url: seo.path,
    title: seo.title,
    description: seo.description,
    type: seo.type,
    images: [
      {
        url: imageUrl,
        width: 800,
        height: 600,
        alt: seo.openGraph.basic.alt,
        type: 'image/jpeg',
      },
    ],
    site_name: seo.openGraph.basic.url,
  }}
  twitter={{
    handle: seo.twitter.creator,
    site: seo.twitter.creator,
    cardType: 'app',
  }}
/>