---
import { AstroSeo } from '@astrolib/seo';
import siteDefaults from '../data/siteData.json';

const siteURL = new URL("/", Astro.url);

// Get the page's frontmatter from Astro.props
//const { seo: frontmatter = {} } = Astro.props;

export interface Props {
  title: string;
  description: string;
  keywords: string;
  url: string;
  email: string;
  type: string;
}

const seoOverrides = Astro.props;
const canonicalURL = new URL(Astro.url.pathname, Astro.url);

const seo = { ...siteDefaults.default, ...seoOverrides }; // Merge defaults with overrides
seo.url = canonicalURL.toString();
// Get the page's URL from Astro.url
const imageUrl = siteDefaults.default.image;

---

<AstroSeo
  canonical={ canonicalURL.toString() }
  openGraph={{
    url: seo.url,
    title: seo.title,
    description: seo.description,
    type: seo.type,
    images: [
      {
        url: imageUrl,
        width: 800,
        height: 600,
        alt: seo.alt,
        type: 'image/jpeg',
      },
    ],
    site_name: seo.url,
  }}
  twitter={{
    handle: siteDefaults.twitter.creator,
    site: siteDefaults.twitter.creator,
    cardType: 'app',
  }}
/>