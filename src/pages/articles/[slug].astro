---
import { getCollection } from 'astro:content';
import ArticleNavPrevNext from '../../components/ArticlesPrevNext.astro';
import Layout from '../../layouts/Layout.astro';

// Find the current post's slug from the URL
const { slug } = Astro.params;

// Get all posts, sorted by newest first
const allArticles = await getCollection('articles');

const sortedArticles = allArticles.sort((a, b) => a.data.title.localeCompare(b.data.title));

// Find the index of the current post
const currentIndex = sortedArticles.findIndex(article => article.id === slug);

// Find the previous and next posts
const prevPost = sortedArticles[currentIndex + 1];
const nextPost = sortedArticles[currentIndex - 1];
---

<Layout title={post.data.title}>
  <!-- Display your blog post content -->
  <h1>{post.data.title}</h1>
  <Content />

  <!-- Add the navigation component -->
  <ArticleNavPrevNext previous={prevPost} next={nextPost} />
</Layout>
